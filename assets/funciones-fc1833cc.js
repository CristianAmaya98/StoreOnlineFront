(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();class q{constructor(){this.url="https://fakestoreapi.com",this.keyStorage="token"}_initHeaders(){const e=new Headers;return e.append("Content-Type","application/json"),e}_saveToken(e){localStorage.setItem(this.keyStorage,e)}async getAllProducts(){return await(await fetch(`${this.url}/products`)).json()??[]}async getProduct(e){return await(await fetch(`${this.url}/products/${e}`)).json()}async getAllCategories(){return["all",...await(await fetch(`${this.url}/products/categories`)).json()]}async getProductsToCategory(e){return await(await fetch(`${this.url}/products/category/${e}`)).json()}async verifyUserAutentication(e){const o=await fetch("https://fakestoreapi.com/auth/login",{method:"POST",headers:this._initHeaders(),body:JSON.stringify(e)}),{token:t}=await o.json();return this._saveToken(t),!!t}verifyToken(){return!!localStorage.getItem(this.keyStorage)}}const m=document.querySelector("#app-container .main__container");document.querySelector("#count-favorite span.header__navigation-count");const F=document.querySelector("#header");function I(a,e,o,t){this.id=a,this.image=e,this.price=o,this.title=t}class z{constructor(){this.favoriteProducts=[],this.keyStorage="favorite",this._initFavorite(),this.counterFavoriteSelector=F.querySelector("#count-favorite span.header__navigation-count")}_initFavorite(){this.favoriteProducts=JSON.parse(localStorage.getItem(this.keyStorage))??[]}addFavorite(e){if(e instanceof I){if(!this.verifyIDFavorite(e.id)){this.favoriteProducts=[e,...this.favoriteProducts],localStorage.setItem(this.keyStorage,JSON.stringify(this.favoriteProducts)),this.counterFavorite();return}this.deleteFavorite(e.id)}}verifyIDFavorite(e){return this.favoriteProducts.some(o=>o.id===Number(e))}deleteFavorite(e){this.favoriteProducts=this.favoriteProducts.filter(o=>o.id!==Number(e)),localStorage.setItem(this.keyStorage,JSON.stringify(this.favoriteProducts)),this.counterFavorite()}counterFavorite(){var e;this.counterFavoriteSelector.textContent=((e=this.favoriteProducts)==null?void 0:e.length)??0}}class B{constructor(){this.shoppingProducts=[],this.keyStorage="shopping",this._initShoppingCart(),this.counterShoppingCartSelector=F.querySelector("#count-shopping span.header__navigation-count")}_initShoppingCart(){this.shoppingProducts=JSON.parse(localStorage.getItem(this.keyStorage))??[]}addProduct(e){e instanceof I&&(this.shoppingProducts=[e,...this.shoppingProducts],localStorage.setItem(this.keyStorage,JSON.stringify(this.shoppingProducts)),this.counterShopping())}counterShopping(){var e;this.counterShoppingCartSelector.textContent=((e=this.shoppingProducts)==null?void 0:e.length)??0}}class G{constructor(){this.showHeader()}showHeader(){const e=document.createElement("DIV");e.classList.add("header__contenido","header__container");const o=document.createElement("DIV");o.className="header__logo-container";const t=document.createElement("H1");t.className="header__logo logo-fake-store",t.textContent="StoreOnline",t.onclick=function(g){g.preventDefault(),window.location.href="index.html"},o.appendChild(t),e.appendChild(o);const n=document.createElement("UL");n.className="header__navigation";const i=document.createElement("LI");i.id="count-shopping",i.className="header__navigation-item";const r=document.createElement("SPAN");r.className="header__navigation-count",r.textContent=0,i.appendChild(r),i.innerHTML+=`
    <svg class="header__icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
      stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
    </svg>`,n.appendChild(i);const l=document.createElement("LI");l.id="count-favorite",l.className="header__navigation-item";const h=document.createElement("SPAN");h.className="header__navigation-count",h.textContent=0,l.appendChild(h),l.innerHTML+=`
    <svg class="header__icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
      stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
    </svg>`,n.appendChild(l),e.appendChild(n),F.appendChild(e)}showSectionTitle(e=void 0,o=""){if(!e)return;const t=document.createElement("DIV");t.className="section";const n=document.createElement("H2");n.className="section__title",n.textContent=o,e.appendChild(n)}showCategories(e=void 0,o=[]){if(!e)return;const t=document.createElement("DIV");t.className="categories";const n=document.createElement("UL");n.className="categories__grid",o.forEach(i=>{const r=document.createElement("LI");r.classList.add("categories__grid-item"),i===b.ALL&&(r.classList.add("categories__grid-item--active"),r.classList),r.textContent=i;const l=this;r.onclick=function(){l.removeActiveCategory(n.childNodes,"categories__grid-item--active"),r.classList.add("categories__grid-item--active"),X(i)},n.appendChild(r)}),t.appendChild(n),e.appendChild(t)}removeActiveCategory(e=[],o=""){e.forEach(t=>{t.classList.contains(o)&&t.classList.remove(o)})}showCardProducts(e=void 0,o=[]){if(!e)return;const t=document.createElement("SECTION");t.className="productos",o.forEach(n=>{const{title:i,price:r,image:l,id:h}=n,g=document.createElement("DIV");g.className="producto";const f=document.createElement("DIV");f.classList.add("producto__container-image"),f.onclick=function(){W(n)};const v=document.createElement("IMG");v.classList.add("producto__imagen"),v.src=l,v.alt=`product-${h}`,f.appendChild(v),g.appendChild(f);const s=document.createElement("DIV");s.classList.add("producto__info");const c=document.createElement("H3");c.classList.add("producto__title"),c.textContent=i;const d=document.createElement("SPAN");d.classList.add("producto__price"),d.textContent=`$ ${r}`;const u=document.createElement("BUTTON");u.classList.add("producto__button","producto__button-add"),u.textContent="AGREGAR",u.onclick=function(){J(n)},s.appendChild(c),s.appendChild(d),s.appendChild(u),g.appendChild(s),t.appendChild(g)}),e.appendChild(t)}showSectionDetailProduct(e=void 0,o){if(!e)return;const t=Object.freeze({COMPRAR:"comprar",AGREGAR:"agregar",FAVORITO:"favorito"}),n=[{title:"Comprar Ahora",icon:` <svg class="product-detail__actions-icon" xmlns="http://www.w3.org/2000/svg" fill="none"
                  viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                  <path stroke-linecap="round" stroke-linejoin="round"
                      d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z" />
              </svg>`,event:t.COMPRAR},{title:"Agregar al Carrito",icon:` <svg class="product-detail__actions-icon" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
                </svg>`,event:t.AGREGAR},{title:"Agregar a Favorito",icon:` <svg class="product-detail__actions-icon" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                </svg>`,event:t.FAVORITO}],{id:i,image:r,title:l,price:h,description:g,rating:{rate:f,count:v}}=o,s=document.createElement("DIV");s.className="product-detail";const c=document.createElement("DIV");c.className="product-detail__container-imagen";const d=document.createElement("IMG");d.className="product-detail__imagen",d.src=r,d.alt=`product-${i}`,c.appendChild(d),s.appendChild(c);const u=document.createElement("DIV");u.className="product-detail__info";const N=document.createElement("H2");N.className="product-detail__info-title",N.textContent=l,u.appendChild(N);const P=document.createElement("P");P.className="product-detail__info-price",P.textContent=`$ ${h}`,u.appendChild(P);const k=document.createElement("DIV");k.className="product-detail__info-ranking",k.textContent=`Calificacion: ${f}`,u.appendChild(k);const x=document.createElement("DIV");x.className="product-detail__info-reviews",x.textContent=`ReseÃ±as: ${v}`,u.appendChild(x);const L=document.createElement("UL");L.className="product-detail__actions",n.forEach(R=>{const{title:$,icon:H,event:V}=R,w=document.createElement("LI");w.className="product-detail__actions-item",w.onclick=function(){switch(console.log("Click...  "+V),V){case t.FAVORITO:K(o);break}};const D=document.createElement("SPAN");D.className="product-detail__actions-text",D.textContent=$,w.appendChild(D),w.innerHTML+=H,L.appendChild(w)}),u.appendChild(L),s.appendChild(u);const y=document.createElement("DIV");y.className="product-detail__description";const A=document.createElement("H2");A.className="product-detail__description-title",A.textContent="Descripcion.",y.appendChild(A);const T=document.createElement("P");T.className="product-detail__description-text",T.textContent=g,y.appendChild(T),s.appendChild(y),e.appendChild(s)}showSpinner(e=void 0,o="Cargando...."){this.limpiarHTML(e);const t=document.createElement("DIV"),n=document.createElement("DIV");n.className="sk-chase";for(let r=1;r<=5;r++){const l=document.createElement("DIV");l.className="sk-chase-dot",n.appendChild(l)}t.appendChild(n);const i=document.createElement("P");i.className="text-center",i.textContent=o,t.appendChild(i),e.appendChild(t)}limpiarHTML(e){for(;e.firstChild;)e.removeChild(e.firstChild)}showFormulario(e=void 0){if(!e)return;const o=[{typeInput:S.TEXT,id:"username",name:"username",label:"UserName:",value:"",placeholder:"Ingrese su UserName"},{typeInput:S.PASSWORD,id:"password",name:"password",label:"Password:",value:"",placeholder:"Ingrese su password"},{typeInput:S.SUBMIT,value:"Ingresar"}],t=document.createElement("FORM");t.className="formulario",t.id="formulario",t.action="";const n=document.createElement("DIV");n.className="formulario__campo",n.innerHTML=`
     <svg class="formulario__icon" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-building-store" width="48" height="48"
        viewBox="0 0 24 24" stroke-width="1.5" stroke="#4F49D1" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <line x1="3" y1="21" x2="21" y2="21" />
        <path d="M3 7v1a3 3 0 0 0 6 0v-1m0 1a3 3 0 0 0 6 0v-1m0 1a3 3 0 0 0 6 0v-1h-18l2 -4h14l2 4" />
        <line x1="5" y1="21" x2="5" y2="10.85" />
        <line x1="19" y1="21" x2="19" y2="10.85" />
        <path d="M9 21v-4a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v4" />
      </svg>
      <span class="formulario__title">Store Online</span>
    `,t.appendChild(n),o.forEach(i=>{const{id:r,label:l,typeInput:h,name:g,value:f,placeholder:v}=i,s=document.createElement("DIV");if(s.className="formulario__campo",h===S.SUBMIT){const c=document.createElement("INPUT");c.classList.add("formulario__input","formulario__input-submit"),c.type=h,c.value=f,s.appendChild(c)}else{const c=document.createElement("LABEL");c.className="formulario__label",c.for=r,c.textContent=l;const d=document.createElement("INPUT");d.className="formulario__input",d.type=h,d.id=r,d.value=f,d.name=g,d.placeholder=v;const u=document.createElement("UL");u.className="formulario__validators",u.id=`validator-${r}`,s.appendChild(c),s.appendChild(d),s.appendChild(u)}t.appendChild(s)}),e.appendChild(t)}showErrorValidator(e=void 0,o=""){if(!e)return;const t=document.createElement("LI");t.className="formulario__validator",t.innerHTML=`
     <svg class="formulario__validator-icon" xmlns="http://www.w3.org/2000/svg"
        class="icon icon-tabler icon-tabler-mood-crazy-happy" width="48" height="48" viewBox="0 0 24 24"
        stroke-width="1.5" stroke="#ff2825" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <circle cx="12" cy="12" r="9" />
        <line x1="7" y1="8.5" x2="10" y2="11.5" />
        <path d="M7 11.5l3 -3" />
        <line x1="14" y1="8.5" x2="17" y2="11.5" />
        <path d="M14 11.5l3 -3" />
        <path d="M9.5 15a3.5 3.5 0 0 0 5 0" />
      </svg>
      <span class="formulario__validator-text">${o}</span>
    `,e.appendChild(t)}}const C=new q,p=new G,j=new B,M=new z,O=document.createElement("DIV"),_=document.createElement("DIV"),b=Object.freeze({ALL:"all",OTHER:"other"}),S=Object.freeze({TEXT:"text",PASSWORD:"password",SUBMIT:"submit"}),E={username:"",password:""};async function oe(){p.showSpinner(m);const[a,e]=await Promise.all([C.getAllProducts(),C.getAllCategories()]);p.limpiarHTML(m),j.counterShopping(),M.counterFavorite(),p.showSectionTitle(O,"Categorias."),p.showCategories(O,e),m.appendChild(O),p.showSectionTitle(_,"Productos."),p.showCardProducts(_,a),m.appendChild(_)}function J(a){const{id:e,image:o,price:t,title:n}=a;j.addProduct(new I(e,o,t,n))}function W(a){const{id:e}=a;window.location.href=`detalles.html?id=${e}`}async function X(a){p.showSpinner(_);let e=[];a===b.ALL?e=await C.getAllProducts():e=await C.getProductsToCategory(a),p.limpiarHTML(_),p.showSectionTitle(_,a===b.ALL?"Productos.":`Productos ${a}.`),p.showCardProducts(_,e),m.appendChild(_)}async function K(a){const{id:e,image:o,price:t,title:n}=a;M.addFavorite(new I(e,o,t,n)),Q(m,e)}function Q(a=void 0,e){if(!a)return;const o=a.querySelectorAll(".product-detail__actions .product-detail__actions-item");M.verifyIDFavorite(e)&&o[2]?(o[2].classList.add("product-detail__actions-item--active"),o[2].querySelector(".product-detail__actions-text").textContent="Quitar de Favorito"):(o[2].classList.remove("product-detail__actions-item--active"),o[2].querySelector(".product-detail__actions-text").textContent="Agregar a Favorito")}function ne(){if(C.verifyToken()){window.location.href="home.html";return}p.showFormulario(m),m.querySelector('input[type="submit"]').disabled=!0,m.querySelector("#formulario").addEventListener("submit",Y),m.querySelector("#username").addEventListener("input",U),m.querySelector("#password").addEventListener("input",U)}async function Y(a){a.preventDefault(),await C.verifyUserAutentication(E)||console.log("Usuario no Valido Intente Nuevamente"),setTimeout(()=>{window.location.href="home.html"},3e3)}function U(a){E[a.target.name]=a.target.value.trim(),Z(a.target.name,a.target.type,a.target.id),m.querySelector('input[type="submit"]').disabled=te(E)}function Z(a,e,o){const t=m.querySelector(`#validator-${o}`);if(p.limpiarHTML(t),ee(E[a])){p.showErrorValidator(t,"Campo esta vacio");return}}function ee(a){return a===""}function te(a){return Object.values(a).some(e=>e==="")}export{oe as a,ne as s};
